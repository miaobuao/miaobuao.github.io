<!DOCTYPE html><script type="module" src="/_astro/BlogPostEmbedLayout.astro_astro_type_script_index_0_lang.CBnQuka3.js"></script> <html lang="zh-CN" class="no-scrollbar"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>家用 NAS 折腾记</title><!-- Open Graph / Facebook --><meta property="og:title" content="家用 NAS 折腾记"><meta property="og:type" content="website"><meta property="og:url" content="https://yangqiuyi.com/embed/blog/homelab/jia-yong-nas-zhe-teng-ji/"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.DY52MY3N.js"></script><link rel="stylesheet" href="/_astro/_slug_.DyZWVpeX.css"><script type="module" src="/_astro/page.nXIIYMne.js"></script></head> <body class="dark:text-white max-w-prose mx-auto">  <div class="flex flex-col rounded-lg"> <header class="p-4 flex flex-col"> <p class="break-all text-lg md:text-xl font-bold"> 家用 NAS 折腾记 </p> <p class="text-sm"> 杨秋逸 · 2024-11-27 </p> </header> <article class="prose max-sm:prose-sm dark:prose-invert text-inherit max-w-full py-4 px-4">  <h1 id="家用-nas-折腾记"><a href="#家用-nas-折腾记">家用 NAS 折腾记</a></h1>
<h2 id="前言"><a href="#前言">前言</a></h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span>每位 Minecraft 玩家最终都会走上 HomeLab 的不归路。</span></span></code></pre>
<p>从初中开始，我就幻想着拥有一台自己的服务器，部署一些服务，囿于各种限制，迟迟未能实现。时过境迁，在2023年，我的室友<code>阿珑</code><a href="https://www.bilibili.com/video/BV1o24y1K7mh/?spm_id_from=333.999.0.0">玩起了 NAS</a>，这对我造成了不小的震撼，遂下决心，要搞一台自己的 NAS。</p>
<p>历尽千辛万苦，我得到了比较满意的方案，写此文以记之。本文会从软硬件多方面进行详细的介绍，希望对正在看这篇文章的你有所帮助。</p>
<h2 id="硬件"><a href="#硬件">硬件</a></h2>
<p>硬件对于我来说是最艰难的一步，不仅仅是因为平时没有接触这方面的经验，更因为硬件的种类繁多，经常挑花了眼。</p>
<h2 id="综述"><a href="#综述">综述</a></h2>
<p>该小节会介绍现有的协议，分析其优劣。</p>
<h3 id="ftp"><a href="#ftp">FTP</a></h3>
<p>最经典的文件传输协议，具有较好的跨平台性，通用性强；支持断点续传和多文件同时上传</p>
<p><strong>缺点：</strong></p>
<p>由于FTP在传输过程中默认使用明文传输，因此安全性较低</p>
<h3 id="smb"><a href="#smb">SMB</a></h3>
<p>Windows 系统开箱即用的协议，在内网中使用体验非常 Nice。如果你是在<strong>内网</strong>的 Windows 上使用，可以考虑此协议。</p>
<p><strong>缺点：</strong></p>
<p>由于过于普及，经常爆出漏洞，若 NAS 中保存了一些隐私数据，那么我非常不建议把 SMB 协议暴露在外网中使用。</p>
<h3 id="nfs"><a href="#nfs">NFS</a></h3>
<p>NFS 协议，是 Linux 内核默认支持的文件传输协议，具有不错的性能，但是没有鉴权功能，因此只能在内网中使用。如果你是在<strong>内网</strong>的 Linux 上使用，可以考虑此协议。</p>
<h3 id="webdav"><a href="#webdav">WebDAV</a></h3>
<p>WebDav 基于 HTTP 协议，默认是明文传输，安全性较低，所以在实际使用时会再套一层 TLS 协议，可以有效抵御中间人攻击。</p>
<h3 id="sftp"><a href="#sftp">SFTP</a></h3>
<p>基于 SSH 的文件传输协议，牺牲了一部分性能，换来了非凡的安全性。</p>
<h2 id="我的方案"><a href="#我的方案">我的方案</a></h2>
<p>最后我选择了 SFTP 协议，虽然性能比较低，但是考虑到我主要是远程使用，网速比较慢，在实际使用时根本不会达到 SSH 的性能瓶颈，所以这是最适合我的一种方案，如果你也是远程使用，可以考虑这个方案。</p>
<p>我选择使用 SFTPGo 来创建 SFTP Service，因为他提供了 WebUI，可以很方便地远程管理用户和密钥。</p>
<p>SFTPGo 提供了几种安装方式，对我而言最适合的就是使用 Docker 部署。</p>
<h3 id="使用-sftpgo-创建-sftp-服务"><a href="#使用-sftpgo-创建-sftp-服务">使用 SFTPGo 创建 SFTP 服务</a></h3>
<h3 id="使用-rclone-挂载-sftp"><a href="#使用-rclone-挂载-sftp">使用 Rclone 挂载 SFTP</a></h3>
<p>诚然，市面上有很多挂载工具，例如大名鼎鼎的 RaiDrive，但是有广告，而且有限制，只能挂载有限数量的网盘，因此我使用了一段时间后，最终选择切换到 Rclone。</p>
<p>如果你比较讨厌命令行，那么真心推荐 RaiDrive，除了上述两个缺点，基本可以满足大部分日常使用的需求。</p>
<p>话不多说，开始折腾 Rclone！</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="sh"><code><span class="line"><span style="color:#B392F0">Rclone</span><span style="color:#9ECBFF"> mount</span><span style="color:#9ECBFF"> truenas-main-sftp:/mnt</span><span style="color:#9ECBFF"> Z:</span></span></code></pre>  </article> </div> <div class="mt-8 p-2"> <script type="module" src="/_astro/Giscus.astro_astro_type_script_index_0_lang.C2pfN53L.js"></script> <giscus-widget repo="miaobuao/miaobuao.github.io" repoId="R_kgDOJONNeg" categoryId="DIC_kwDOJONNes4CVJhu" mapping="og:title" strict="0" reactionsEnabled="1" emitMetadata="0" inputPosition="top" theme="preferred_color_scheme" lang="zh-CN" loading="lazy"></giscus-widget> </div><div class="h-16 sm:h-0"></div>  </body></html>