<!DOCTYPE html><script type="module" src="/_astro/BlogPostEmbedLayout.astro_astro_type_script_index_0_lang.CBnQuka3.js"></script> <html lang="zh-CN" class="no-scrollbar"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>TypeScript 类型体操：两数求和</title><!-- Open Graph / Facebook --><meta property="og:title" content="TypeScript 类型体操：两数求和"><meta property="og:type" content="website"><meta property="og:url" content="https://yangqiuyi.com/embed/blog/kai-fa/typescript/typescriptlei-xing-ti-cao-liang-shu-qiu-he/"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.DY52MY3N.js"></script><link rel="stylesheet" href="/_astro/_slug_.DyZWVpeX.css"><script type="module" src="/_astro/page.nXIIYMne.js"></script></head> <body class="dark:text-white max-w-prose mx-auto">  <div class="flex flex-col rounded-lg"> <header class="p-4 flex flex-col"> <p class="break-all text-lg md:text-xl font-bold"> TypeScript 类型体操：两数求和 </p> <p class="text-sm"> 杨秋逸 · 2025-01-05 </p> </header> <article class="prose max-sm:prose-sm dark:prose-invert text-inherit max-w-full py-4 px-4">  <h1 id="typescript-类型体操两数求和"><a href="#typescript-类型体操两数求和">TypeScript 类型体操：两数求和</a></h1>
<p>给定一个数组 arr 和一个数字 target，我们要判断能否从 arr 中取出两个数，通过加法得到 target。</p>
<h2 id="结果展示"><a href="#结果展示">结果展示</a></h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> ToTuple</span><span style="color:#79b8ff">&#x3C;</span></span>
<span class="line"><span style="color:#B392F0">	L</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">	A</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Array</span><span style="color:#ffab70">&#x3C;</span><span style="color:#79B8FF">any</span><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#ffab70">[</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> A</span><span style="color:#79b8ff">[</span><span style="color:#9ECBFF">'length'</span><span style="color:#79b8ff">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#B392F0"> L</span><span style="color:#F97583"> ?</span><span style="color:#B392F0"> A</span><span style="color:#F97583"> :</span><span style="color:#B392F0"> ToTuple</span><span style="color:rgba(255, 18, 18, 0.8)">&#x3C;</span><span style="color:#B392F0">L</span><span style="color:#E1E4E8">, </span><span style="color:#ffab70">[</span><span style="color:#F97583">...</span><span style="color:#B392F0">A</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">any</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Sub</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">B</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#B392F0">	ToTuple</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#E1E4E8"> </span><span style="color:#ffab70">[</span><span style="color:#F97583">...</span><span style="color:#B392F0">ToTuple</span><span style="color:#b392f0">&#x3C;</span><span style="color:#B392F0">B</span><span style="color:#b392f0">></span><span style="color:#E1E4E8">, </span><span style="color:#F97583">...infer</span><span style="color:#B392F0"> Tail</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">?</span><span style="color:#B392F0"> Tail</span><span style="color:#ffab70">[</span><span style="color:#9ECBFF">'length'</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> -</span><span style="color:#79B8FF">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> FirstElement</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Array</span><span style="color:#b392f0">&#x3C;</span><span style="color:#79B8FF">any</span><span style="color:#b392f0">></span><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> A</span><span style="color:#F97583"> extends</span><span style="color:#E1E4E8"> </span><span style="color:#ffab70">[</span><span style="color:#F97583">infer</span><span style="color:#B392F0"> F</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">...infer</span><span style="color:#B392F0"> Tail</span><span style="color:#ffab70">]</span></span>
<span class="line"><span style="color:#F97583">	?</span><span style="color:#B392F0"> F</span></span>
<span class="line"><span style="color:#F97583">	:</span><span style="color:#79B8FF"> never</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> TailElements</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Array</span><span style="color:#b392f0">&#x3C;</span><span style="color:#79B8FF">any</span><span style="color:#b392f0">></span><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> A</span><span style="color:#F97583"> extends</span><span style="color:#E1E4E8"> </span><span style="color:#ffab70">[</span><span style="color:#F97583">infer</span><span style="color:#B392F0"> F</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">...infer</span><span style="color:#B392F0"> Tail</span><span style="color:#ffab70">]</span></span>
<span class="line"><span style="color:#F97583">	?</span><span style="color:#B392F0"> Tail</span></span>
<span class="line"><span style="color:#F97583">	:</span><span style="color:#79B8FF"> never</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> MapSub</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> any</span><span style="color:#b392f0">[</span><span style="color:#b392f0">]</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">B</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> A</span><span style="color:#ffab70">[</span><span style="color:#9ECBFF">'length'</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#F97583">	?</span><span style="color:#E1E4E8"> </span><span style="color:#ffab70">[</span><span style="color:#ffab70">]</span></span>
<span class="line"><span style="color:#F97583">	:</span><span style="color:#E1E4E8"> </span><span style="color:#ffab70">[</span><span style="color:#B392F0">Sub</span><span style="color:#b392f0">&#x3C;</span><span style="color:#B392F0">B</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">FirstElement</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#79b8ff">></span><span style="color:#b392f0">></span><span style="color:#E1E4E8">, </span><span style="color:#F97583">...</span><span style="color:#B392F0">MapSub</span><span style="color:#b392f0">&#x3C;</span><span style="color:#B392F0">TailElements</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#79b8ff">></span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">B</span><span style="color:#b392f0">></span><span style="color:#ffab70">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Include</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> any</span><span style="color:#b392f0">[</span><span style="color:#b392f0">]</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">B</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> any</span><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> A</span><span style="color:#ffab70">[</span><span style="color:#9ECBFF">'length'</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#F97583">	?</span><span style="color:#79B8FF"> false</span></span>
<span class="line"><span style="color:#F97583">	:</span><span style="color:#B392F0"> FirstElement</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#B392F0"> B</span></span>
<span class="line"><span style="color:#F97583">		?</span><span style="color:#79B8FF"> true</span></span>
<span class="line"><span style="color:#F97583">		:</span><span style="color:#B392F0"> Include</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">TailElements</span><span style="color:#b392f0">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#b392f0">></span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">B</span><span style="color:#ffab70">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> TwoSum</span><span style="color:#ffab70">&#x3C;</span></span>
<span class="line"><span style="color:#B392F0">	Arr</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Array</span><span style="color:#b392f0">&#x3C;</span><span style="color:#79B8FF">number</span><span style="color:#b392f0">></span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">	Target</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">	Rest</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#b392f0">[</span><span style="color:#b392f0">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> Arr</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> Rest</span><span style="color:#ffab70">[</span><span style="color:#9ECBFF">'length'</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#F97583">	?</span><span style="color:#79B8FF"> false</span></span>
<span class="line"><span style="color:#F97583">	:</span><span style="color:#B392F0"> Include</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">MapSub</span><span style="color:#b392f0">&#x3C;</span><span style="color:#B392F0">Arr</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Target</span><span style="color:#b392f0">></span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">FirstElement</span><span style="color:#b392f0">&#x3C;</span><span style="color:#B392F0">Rest</span><span style="color:#b392f0">></span><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#79B8FF"> true</span></span>
<span class="line"><span style="color:#F97583">		?</span><span style="color:#79B8FF"> true</span></span>
<span class="line"><span style="color:#F97583">		:</span><span style="color:#B392F0"> TwoSum</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">Arr</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Target</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">TailElements</span><span style="color:#b392f0">&#x3C;</span><span style="color:#B392F0">Rest</span><span style="color:#b392f0">></span><span style="color:#ffab70">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> res2</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> Sub</span><span style="color:#ffab70">&#x3C;</span><span style="color:#79B8FF">10</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">7</span><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#6A737D">// 3</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> res3</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> FirstElement</span><span style="color:rgba(255, 18, 18, 0.8)">&#x3C;</span><span style="color:#b392f0">[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">3</span><span style="color:#b392f0">]</span><span style="color:#E1E4E8">></span><span style="color:#E1E4E8"> </span><span style="color:#6A737D">// 1</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> res4</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> TailElements</span><span style="color:rgba(255, 18, 18, 0.8)">&#x3C;</span><span style="color:#79b8ff">[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">3</span><span style="color:#79b8ff">]</span><span style="color:#E1E4E8">></span><span style="color:#E1E4E8"> </span><span style="color:#6A737D">// [2, 3]</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> res6</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> TwoSum</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#ffab70">[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">3</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">6</span><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#6A737D">// true</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> res7</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> TwoSum</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#ffab70">[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">3</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">7</span><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#6A737D">// false</span></span></code></pre>
<h2 id="思路"><a href="#思路">思路</a></h2>
<p>看不懂？没关系，先用编程语言实现一下类似的逻辑，找找思路：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> twoSum</span><span style="color:#79b8ff">(</span><span style="color:#FFAB70">arr</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#ffab70">[</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">target</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#79b8ff">)</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> boolean</span><span style="color:#E1E4E8"> </span><span style="color:#79b8ff">{</span></span>
<span class="line"><span style="color:#F97583">	return</span><span style="color:#E1E4E8"> arr.</span><span style="color:#B392F0">some</span><span style="color:#ffab70">(</span><span style="color:#b392f0">(</span><span style="color:#FFAB70">el</span><span style="color:#b392f0">)</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#F97583">></span><span style="color:#E1E4E8"> arr.</span><span style="color:#B392F0">includes</span><span style="color:#b392f0">(</span><span style="color:#E1E4E8">target </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> el</span><span style="color:#b392f0">)</span><span style="color:#ffab70">)</span></span>
<span class="line"><span style="color:#79b8ff">}</span></span></code></pre>
<p>很简单对吧，只要 <code>arr</code> 里存在 <code>target - el</code> 就返回 true。</p>
<p>那为什么写成类型就变得如此复杂？让我们一步一步来看！</p>
<p>首先，为了计算 <code>target - el</code>，我们需要实现一个减法类型 <code>Sub</code>。</p>
<p>由于 TypeScript 中的加减法可以用数组的长度来间接得到，我们不得不写一个 <code>ToTuple</code> 来把数字转化成对应长度的数组。</p>
<p>为了判断数组中是否存在 <code>target - el</code>，我们还需要完成一个 <code>Include</code> 类型。</p>
<h2 id="实现"><a href="#实现">实现</a></h2>
<h3 id="totuple"><a href="#totuple">ToTuple</a></h3>
<p>在 TypeScript 中，直接进行数字运算是不可能的，但我们可以通过数组的长度来模拟数字。因此，我们使用递归的方式构建一个长度为 L 的数组 A，当 A[‘length’] 达到 L 时，递归结束，返回数组 A。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> ToTuple</span><span style="color:#79b8ff">&#x3C;</span></span>
<span class="line"><span style="color:#B392F0">	L</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">	A</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Array</span><span style="color:#ffab70">&#x3C;</span><span style="color:#79B8FF">any</span><span style="color:#ffab70">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#ffab70">[</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> A</span><span style="color:#79b8ff">[</span><span style="color:#9ECBFF">'length'</span><span style="color:#79b8ff">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#B392F0"> L</span><span style="color:#F97583"> ?</span><span style="color:#B392F0"> A</span><span style="color:#F97583"> :</span><span style="color:#B392F0"> ToTuple</span><span style="color:rgba(255, 18, 18, 0.8)">&#x3C;</span><span style="color:#B392F0">L</span><span style="color:#E1E4E8">, </span><span style="color:#ffab70">[</span><span style="color:#F97583">...</span><span style="color:#B392F0">A</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">any</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="sub"><a href="#sub">Sub</a></h3>
<p>我们利用 ToTuple 将数字 A 和 B 转换为相应长度的数组，然后通过模式匹配 <code>ToTuple&#x3C;A></code> 是否可以分解为 <code>[...ToTuple&#x3C;B>, ...infer Tail]</code>，从而确定 A - B 的结果为 Tail[‘length’]</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Sub</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">B</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#B392F0">	ToTuple</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#E1E4E8"> </span><span style="color:#79b8ff">[</span><span style="color:#F97583">...</span><span style="color:#B392F0">ToTuple</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">B</span><span style="color:#ffab70">></span><span style="color:#E1E4E8">, </span><span style="color:#F97583">...infer</span><span style="color:#B392F0"> Tail</span><span style="color:#79b8ff">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">?</span><span style="color:#B392F0"> Tail</span><span style="color:#79b8ff">[</span><span style="color:#9ECBFF">'length'</span><span style="color:#79b8ff">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> -</span><span style="color:#79B8FF">1</span></span></code></pre>
<h3 id="firstelement--tailelements"><a href="#firstelement--tailelements">FirstElement &#x26; TailElements</a></h3>
<p>FirstElement 和 TailElements 分别用于提取数组的第一个元素和剩余元素。</p>
<p>通过模式匹配，FirstElement 提取数组的第一个元素，而 TailElements 则提取数组除第一个元素外的所有元素。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> FirstElement</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Array</span><span style="color:#ffab70">&#x3C;</span><span style="color:#79B8FF">any</span><span style="color:#ffab70">></span><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> A</span><span style="color:#F97583"> extends</span><span style="color:#E1E4E8"> </span><span style="color:#79b8ff">[</span><span style="color:#F97583">infer</span><span style="color:#B392F0"> F</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">...infer</span><span style="color:#B392F0"> Tail</span><span style="color:#79b8ff">]</span></span>
<span class="line"><span style="color:#F97583">	?</span><span style="color:#B392F0"> F</span></span>
<span class="line"><span style="color:#F97583">	:</span><span style="color:#79B8FF"> never</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> TailElements</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Array</span><span style="color:#ffab70">&#x3C;</span><span style="color:#79B8FF">any</span><span style="color:#ffab70">></span><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> A</span><span style="color:#F97583"> extends</span><span style="color:#E1E4E8"> </span><span style="color:#79b8ff">[</span><span style="color:#F97583">infer</span><span style="color:#B392F0"> F</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">...infer</span><span style="color:#B392F0"> Tail</span><span style="color:#79b8ff">]</span></span>
<span class="line"><span style="color:#F97583">	?</span><span style="color:#B392F0"> Tail</span></span>
<span class="line"><span style="color:#F97583">	:</span><span style="color:#79B8FF"> never</span></span></code></pre>
<h3 id="mapsub"><a href="#mapsub">MapSub</a></h3>
<p>通过递归处理数组中的每个元素，使用 Sub 计算 B 与每个元素的差值，并将结果存储在新的数组中。之所以计算 B 与每个元素的差，而不是把每个元素都减去B，是因为在之后使用的时候，B 是 Target，大于数组中的任何一个元素，而Sub只能计算 A > B 的情况，因此只能计算 B 与每个元素的差。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="ts"><code><span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> MapSub</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> any</span><span style="color:#ffab70">[</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">B</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> A</span><span style="color:#79b8ff">[</span><span style="color:#9ECBFF">'length'</span><span style="color:#79b8ff">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#F97583">	?</span><span style="color:#E1E4E8"> </span><span style="color:#79b8ff">[</span><span style="color:#79b8ff">]</span></span>
<span class="line"><span style="color:#F97583">	:</span><span style="color:#E1E4E8"> </span><span style="color:#79b8ff">[</span><span style="color:#B392F0">Sub</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">B</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">FirstElement</span><span style="color:#b392f0">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#b392f0">></span><span style="color:#ffab70">></span><span style="color:#E1E4E8">, </span><span style="color:#F97583">...</span><span style="color:#B392F0">MapSub</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">TailElements</span><span style="color:#b392f0">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#b392f0">></span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">B</span><span style="color:#ffab70">></span><span style="color:#79b8ff">]</span></span></code></pre>
<h3 id="include"><a href="#include">Include</a></h3>
<p>通过递归遍历数组，逐个比较元素，如果找到了目标元素则返回 true，否则返回 false。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Include</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> any</span><span style="color:#ffab70">[</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">B</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> any</span><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> A</span><span style="color:#79b8ff">[</span><span style="color:#9ECBFF">'length'</span><span style="color:#79b8ff">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#F97583">	?</span><span style="color:#79B8FF"> false</span></span>
<span class="line"><span style="color:#F97583">	:</span><span style="color:#B392F0"> FirstElement</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#B392F0"> B</span></span>
<span class="line"><span style="color:#F97583">		?</span><span style="color:#79B8FF"> true</span></span>
<span class="line"><span style="color:#F97583">		:</span><span style="color:#B392F0"> Include</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">TailElements</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">A</span><span style="color:#ffab70">></span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">B</span><span style="color:#79b8ff">></span></span></code></pre>
<h3 id="最后twosum"><a href="#最后twosum">最后，TwoSum</a></h3>
<p>通过递归检查数组中的每个元素 el，计算 Target - el 的结果，并检查 Arr 中是否包含该结果。如果找到匹配对，则返回 true，否则继续递归检查。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> TwoSum</span><span style="color:#79b8ff">&#x3C;</span></span>
<span class="line"><span style="color:#B392F0">	Arr</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Array</span><span style="color:#ffab70">&#x3C;</span><span style="color:#79B8FF">number</span><span style="color:#ffab70">></span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">	Target</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">	Rest</span><span style="color:#F97583"> extends</span><span style="color:#79B8FF"> number</span><span style="color:#ffab70">[</span><span style="color:#ffab70">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> Arr</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#B392F0"> Rest</span><span style="color:#79b8ff">[</span><span style="color:#9ECBFF">'length'</span><span style="color:#79b8ff">]</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#F97583">	?</span><span style="color:#79B8FF"> false</span></span>
<span class="line"><span style="color:#F97583">	:</span><span style="color:#B392F0"> Include</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">MapSub</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">Arr</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Target</span><span style="color:#ffab70">></span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">FirstElement</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">Rest</span><span style="color:#ffab70">></span><span style="color:#79b8ff">></span><span style="color:#E1E4E8"> </span><span style="color:#F97583">extends</span><span style="color:#79B8FF"> true</span></span>
<span class="line"><span style="color:#F97583">		?</span><span style="color:#79B8FF"> true</span></span>
<span class="line"><span style="color:#F97583">		:</span><span style="color:#B392F0"> TwoSum</span><span style="color:#79b8ff">&#x3C;</span><span style="color:#B392F0">Arr</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Target</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">TailElements</span><span style="color:#ffab70">&#x3C;</span><span style="color:#B392F0">Rest</span><span style="color:#ffab70">></span><span style="color:#79b8ff">></span></span></code></pre>  </article> </div> <div class="mt-8 p-2"> <script type="module" src="/_astro/Giscus.astro_astro_type_script_index_0_lang.C2pfN53L.js"></script> <giscus-widget repo="miaobuao/miaobuao.github.io" repoId="R_kgDOJONNeg" categoryId="DIC_kwDOJONNes4CVJhu" mapping="og:title" strict="0" reactionsEnabled="1" emitMetadata="0" inputPosition="top" theme="preferred_color_scheme" lang="zh-CN" loading="lazy"></giscus-widget> </div><div class="h-16 sm:h-0"></div>  </body></html>