<!DOCTYPE html><script type="module" src="/_astro/BlogPostEmbedLayout.astro_astro_type_script_index_0_lang.CBnQuka3.js"></script> <html lang="zh-CN" class="no-scrollbar"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>畸形的插值算法</title><!-- Open Graph / Facebook --><meta property="og:title" content="畸形的插值算法"><meta property="og:type" content="website"><meta property="og:url" content="https://yangqiuyi.com/embed/blog/suan-fa/ji-xing-de-cha-zhi-suan-fa/"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.DY52MY3N.js"></script><link rel="stylesheet" href="/_astro/_slug_.DyZWVpeX.css"><script type="module" src="/_astro/page.nXIIYMne.js"></script></head> <body class="dark:text-white max-w-prose mx-auto">  <div class="flex flex-col rounded-lg"> <header class="p-4 flex flex-col"> <p class="break-all text-lg md:text-xl font-bold"> 畸形的插值算法 </p> <p class="text-sm"> 杨秋逸 · 2022-03-18 </p> </header> <article class="prose max-sm:prose-sm dark:prose-invert text-inherit max-w-full py-4 px-4">  <p>自己开发了一个插值算法，可以复制图像。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> Copy</span><span style="color:#79b8ff">(</span><span style="color:#FFAB70">img</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">w</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">h</span><span style="color:#79b8ff">)</span><span style="color:#E1E4E8"> </span><span style="color:#79b8ff">{</span></span>
<span class="line"><span style="color:#E1E4E8">    w </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">round</span><span style="color:#ffab70">(</span><span style="color:#E1E4E8">w</span><span style="color:#ffab70">)</span></span>
<span class="line"><span style="color:#E1E4E8">    h </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">round</span><span style="color:#ffab70">(</span><span style="color:#E1E4E8">h</span><span style="color:#ffab70">)</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> dx </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> img.width </span><span style="color:#F97583">/</span><span style="color:#E1E4E8"> w,</span></span>
<span class="line"><span style="color:#E1E4E8">        dy </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> img.height </span><span style="color:#F97583">/</span><span style="color:#E1E4E8"> h;</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> tmp </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Array.</span><span style="color:#B392F0">from</span><span style="color:#ffab70">(</span><span style="color:#b392f0">{</span><span style="color:#E1E4E8">length:h</span><span style="color:#F97583">*</span><span style="color:#E1E4E8">w</span><span style="color:#F97583">*</span><span style="color:#79B8FF">4</span><span style="color:#b392f0">}</span><span style="color:#E1E4E8">, </span><span style="color:#b392f0">(</span><span style="color:#FFAB70">_</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">i</span><span style="color:#b392f0">)</span><span style="color:#F97583">=</span><span style="color:#F97583">></span><span style="color:#b392f0">{</span></span>
<span class="line"><span style="color:#F97583">        let</span><span style="color:#E1E4E8"> x </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">floor</span><span style="color:#79b8ff">(</span><span style="color:#ffab70">(</span><span style="color:#E1E4E8">i </span><span style="color:#F97583">%</span><span style="color:#E1E4E8"> w</span><span style="color:#ffab70">)</span><span style="color:#79b8ff">)</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            y </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">floor</span><span style="color:#79b8ff">(</span><span style="color:#ffab70">(</span><span style="color:#E1E4E8">i </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> x</span><span style="color:#ffab70">)</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">/</span><span style="color:#E1E4E8"> w</span><span style="color:#79b8ff">)</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">            b </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">%</span><span style="color:#79B8FF"> 4</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">        console.</span><span style="color:#B392F0">log</span><span style="color:#79b8ff">(</span><span style="color:#E1E4E8">x, y</span><span style="color:#79b8ff">)</span></span>
<span class="line"><span style="color:#E1E4E8">        x </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">round</span><span style="color:#79b8ff">(</span><span style="color:#E1E4E8">x </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> dx</span><span style="color:#79b8ff">)</span></span>
<span class="line"><span style="color:#E1E4E8">        y </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">round</span><span style="color:#79b8ff">(</span><span style="color:#E1E4E8">y </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> dy</span><span style="color:#79b8ff">)</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> img.data</span><span style="color:#79b8ff">[</span><span style="color:#ffab70">(</span><span style="color:#E1E4E8">y </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> img.width </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> x</span><span style="color:#ffab70">)</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">*</span><span style="color:#79B8FF"> 4</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> b</span><span style="color:#79b8ff">]</span></span>
<span class="line"><span style="color:#E1E4E8">    </span><span style="color:#b392f0">}</span><span style="color:#ffab70">)</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> ImageData</span><span style="color:#ffab70">(</span><span style="color:#F97583">new</span><span style="color:#B392F0"> Uint8ClampedArray</span><span style="color:#b392f0">(</span><span style="color:#E1E4E8">tmp</span><span style="color:#b392f0">)</span><span style="color:#E1E4E8">, w, h</span><span style="color:#ffab70">)</span></span>
<span class="line"><span style="color:#79b8ff">}</span></span></code></pre>
<p><img  loading="lazy" decoding="async" fetchpriority="auto" width="1130" height="440" src="/_astro/1647538292084.Bg_SgMb9_Z13NsCY.webp" ></p>  </article> </div> <div class="mt-8 p-2"> <script type="module" src="/_astro/Giscus.astro_astro_type_script_index_0_lang.C2pfN53L.js"></script> <giscus-widget repo="miaobuao/miaobuao.github.io" repoId="R_kgDOJONNeg" categoryId="DIC_kwDOJONNes4CVJhu" mapping="og:title" strict="0" reactionsEnabled="1" emitMetadata="0" inputPosition="top" theme="preferred_color_scheme" lang="zh-CN" loading="lazy"></giscus-widget> </div><div class="h-16 sm:h-0"></div>  </body></html>